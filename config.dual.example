# Example Configuration: Dual Network Mode (Meshtastic + MeshCore)
#
# This is a complete working example for running the bot on TWO mesh networks
# simultaneously: one Meshtastic network and one MeshCore network.
#
# Copy this file to config.py and customize for your setup.

# ========================================
# DUAL NETWORK MODE - ENABLE THIS!
# ========================================
DUAL_NETWORK_MODE = True  # ‚≠ê This enables dual network support

# ========================================
# MESHTASTIC NETWORK CONFIGURATION
# ========================================
MESHTASTIC_ENABLED = True

# Connection mode for Meshtastic
# - 'serial': Local radio via USB (e.g., /dev/ttyACM0)
# - 'tcp': Remote radio via network (e.g., 192.168.1.38:4403)
CONNECTION_MODE = 'serial'

# Serial configuration (if CONNECTION_MODE='serial')
SERIAL_PORT = "/dev/ttyACM0"  # ‚ö†Ô∏è Change to match your Meshtastic radio

# TCP configuration (if CONNECTION_MODE='tcp')
TCP_HOST = "192.168.1.38"
TCP_PORT = 4403

# ========================================
# MESHCORE NETWORK CONFIGURATION
# ========================================
MESHCORE_ENABLED = True

# Serial port for MeshCore radio
MESHCORE_SERIAL_PORT = "/dev/ttyUSB0"  # ‚ö†Ô∏è Change to match your MeshCore radio

# MeshCore RX_LOG_DATA monitoring
# Set to True to see ALL RF packets (debug), False for DMs only
MESHCORE_RX_LOG_ENABLED = True

# ========================================
# HARDWARE VERIFICATION
# ========================================
# Before starting, verify your hardware connections:
#
# 1. Check device paths:
#    ls -la /dev/ttyACM* /dev/ttyUSB*
#
# 2. Expected output:
#    /dev/ttyACM0  <- Meshtastic radio
#    /dev/ttyUSB0  <- MeshCore radio
#
# 3. Set permissions if needed:
#    sudo chmod 666 /dev/ttyACM0
#    sudo chmod 666 /dev/ttyUSB0
#
# 4. Verify frequencies are different on both radios!
#    - Meshtastic: Check in Meshtastic app
#    - MeshCore: Check in MeshCore settings
#    - They MUST be different to avoid interference

# ========================================
# PRIVATE CONFIGURATION
# ========================================
# Sensitive parameters (tokens, passwords) should be in config_priv.py
# See config.priv.py.sample for details

# Import from config_priv.py
try:
    from config_priv import *
except ImportError:
    print("‚ö†Ô∏è  config_priv.py not found - using defaults")
    TELEGRAM_BOT_TOKEN = "******************"
    TELEGRAM_AUTHORIZED_USERS = []
    TELEGRAM_ALERT_USERS = []
    TELEGRAM_TO_MESH_MAPPING = {}
    MQTT_NEIGHBOR_PASSWORD = "your_mqtt_password_here"
    REBOOT_AUTHORIZED_USERS = []
    REBOOT_PASSWORD = "your_password_secret"
    MESH_ALERT_SUBSCRIBED_NODES = []
    CLI_TO_MESH_MAPPING = {}

# ========================================
# LLAMA.CPP CONFIGURATION
# ========================================
LLAMA_HOST = "127.0.0.1"
LLAMA_PORT = 8080

# ========================================
# MESSAGE SIZE LIMITS
# ========================================
MAX_MESSAGE_SIZE = 180  # LoRa constraint (both networks)

# ========================================
# THROTTLING
# ========================================
MAX_COMMANDS_PER_WINDOW = 5
COMMAND_WINDOW_SECONDS = 300

# ========================================
# DEBUGGING
# ========================================
DEBUG_MODE = False  # Set True for verbose logging

# ========================================
# OPTIONAL FEATURES
# ========================================

# Telegram integration
TELEGRAM_ENABLED = False  # Set True if using Telegram

# ESPHome telemetry
ESPHOME_TELEMETRY_ENABLED = False
ESPHOME_HOST = "192.168.1.27"

# Weather vigilance
VIGILANCE_ENABLED = False
VIGILANCE_DEPARTEMENT = '25'

# Lightning detection
BLITZ_ENABLED = False
BLITZ_LATITUDE = 0.0  # 0.0 = auto-detect
BLITZ_LONGITUDE = 0.0
BLITZ_RADIUS_KM = 50

# MQTT neighbor collection
MQTT_NEIGHBOR_ENABLED = False
MQTT_NEIGHBOR_SERVER = "serveurperso.com"
MQTT_NEIGHBOR_PORT = 1883

# ========================================
# AI CONFIGURATION (MESHTASTIC NETWORK)
# ========================================
MESH_AI_CONFIG = {
    "system_prompt": "Tu es un assistant IA utile pour le r√©seau mesh.",
    "max_tokens": 1500,
    "temperature": 0.7,
    "max_response_chars": 320  # Must fit in LoRa packet
}

# ========================================
# AI CONFIGURATION (MESHCORE NETWORK)
# ========================================
# Note: MeshCore uses same AI config as Meshtastic
# But responses are limited to DM capabilities

# ========================================
# STARTUP CHECKLIST
# ========================================
#
# Before starting the bot in dual network mode:
#
# [ ] 1. Two physical radios connected
# [ ] 2. Device paths correct (/dev/ttyACM0, /dev/ttyUSB0)
# [ ] 3. Permissions set (chmod 666 on both devices)
# [ ] 4. Frequencies different on both networks
# [ ] 5. llama.cpp running on localhost:8080
# [ ] 6. config_priv.py created and configured
# [ ] 7. MeshCore library installed (pip install meshcore-cli)
#
# To start:
#   python main_script.py
#
# To check logs:
#   journalctl -u meshbot -f
#
# Expected startup messages:
#   üîÑ MODE DUAL: Connexion simultan√©e Meshtastic + MeshCore
#   ‚úÖ Meshtastic interface set: ...
#   ‚úÖ MeshCore interface set: ...
#   ‚úÖ Mode dual initialis√© avec succ√®s
